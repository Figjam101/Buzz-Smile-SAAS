/*! For license information please see 206.123b6af7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbuzz_smile_official_website_client=self.webpackChunkbuzz_smile_official_website_client||[]).push([[206],{1206:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(5043),i=a(9722),l=a(5016),o=a(4919),n=a(9940),r=a(4830),c=a(7421),d=a(8306),h=a(7104),u=a(9855);const p=(0,a(1639).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var x=a(614),m=a(4596),y=a(579);const g=e=>{let{video:t,onPlay:a,onDownload:l,onDelete:o,onEdit:g,onSchedule:f,onProcess:b,isEditing:v,editingFilename:w,setEditingFilename:j,onSaveEdit:k,onCancelEdit:N,className:A=""}=e;const[M,S]=(0,s.useState)(null),[C,E]=(0,s.useState)(!1),[z,_]=(0,s.useState)(!1),[P,L]=(0,s.useState)(!0),[B,D]=(0,s.useState)(!1),[F,V]=(0,s.useState)(!1),$=(0,s.useRef)(null),H=(0,s.useCallback)(e=>{$.current&&$.current.disconnect(),e&&($.current=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&(L(!0),$.current.disconnect())},{threshold:.1}),$.current.observe(e))},[]);(0,s.useEffect)(()=>{if(!t||!P)return;(async()=>{try{_(!0);try{const e=("http://localhost:5002"||"").replace(/\/$/,"");let a=/\/api$/.test(e)?e.replace(/\/api$/,""):e;if(!a&&"undefined"!==typeof window){a=window.location.origin}const s="".concat(a,"/api/videos/").concat(t._id,"/thumbnail"),i=await fetch(s,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(i.ok){const e=await i.blob(),t=URL.createObjectURL(e);return S(t),void _(!1)}}catch(e){console.log("Server thumbnail not available, generating client-side...")}E(!0),_(!1)}catch(a){console.error("Error generating thumbnail:",a),E(!0),_(!1)}})()},[t,P]),(0,s.useEffect)(()=>()=>{try{M&&/^blob:/.test(M)&&URL.revokeObjectURL(M)}catch(e){}},[M]);return t?(0,y.jsxs)("div",{className:"group bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-all duration-200 ".concat(A),children:[(0,y.jsxs)("div",{ref:H,className:"relative w-full h-48 cursor-pointer overflow-hidden",onClick:()=>a&&a(t),children:[z?(0,y.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,y.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):M?(0,y.jsx)("img",{src:M,alt:"Thumbnail for ".concat(t.title||t.filename),className:"w-full h-full object-cover",onError:()=>E(!0)}):(0,y.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,y.jsx)(n.A,{className:"w-12 h-12 text-gray-400"})}),(0,y.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200 flex items-center justify-center",children:(0,y.jsx)(r.A,{className:"w-12 h-12 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200"})}),(0,y.jsxs)("div",{className:"absolute top-2 right-2 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[b&&"ready"===t.status&&(0,y.jsxs)("button",{onClick:e=>{if(e.stopPropagation(),"function"===typeof b)return void b(t);if(B||F)return;D(!0);const a=localStorage.getItem("token"),s="http://localhost:5002".replace(/\/$/,""),l=/\/api$/.test(s)?s.replace(/\/api$/,""):s,o="undefined"!==typeof window?window.location.origin:"",n=o.includes("localhost:3000")?"http://localhost:5000":o,r=l||n;i.A.post("".concat(r,"/api/videos/").concat(t._id,"/process"),{editingOptions:{}},{headers:{Authorization:"Bearer ".concat(a)}}).then(()=>{V(!0)}).catch(()=>{}).finally(()=>D(!1))},className:"px-2 py-1 bg-white/80 text-gray-800 rounded-full border border-gray-300 hover:bg-white transition-colors flex items-center gap-1 shadow-sm",title:"Process",children:[(0,y.jsx)(c.A,{className:"w-4 h-4 text-gray-700"}),(0,y.jsx)("span",{className:"text-xs font-medium",children:F?"Queued":B?"Processing\u2026":"Process"})]}),f&&"completed"===t.status&&(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),f(t)},className:"p-2 bg-purple-500 text-white rounded-full hover:bg-purple-600 transition-colors",title:"Schedule social media post",children:(0,y.jsx)(d.A,{className:"w-4 h-4"})}),l&&(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),l(t)},className:"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors",title:"Download video",children:(0,y.jsx)(h.A,{className:"w-4 h-4"})}),o&&(0,y.jsx)("button",{onClick:e=>{e.stopPropagation(),o(t._id)},className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Delete video",children:(0,y.jsx)(u.A,{className:"w-4 h-4"})})]}),(0,y.jsx)("div",{className:"absolute bottom-2 left-2",children:(e=>{switch(e){case"processing":return(0,y.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"});case"ready":case"completed":return(0,y.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"});case"failed":return(0,y.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"});default:return(0,y.jsx)("div",{className:"w-2 h-2 bg-gray-500 rounded-full"})}})(t.status)})]}),(0,y.jsxs)("div",{className:"p-4",children:[v?(0,y.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,y.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value),onKeyDown:e=>{"Enter"===e.key&&k(),"Escape"===e.key&&N()},className:"flex-1 text-sm font-medium text-gray-900 bg-white border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),(0,y.jsx)("button",{onClick:k,className:"p-1 text-green-600 hover:text-green-700",title:"Save",children:(0,y.jsx)(p,{className:"w-4 h-4"})}),(0,y.jsx)("button",{onClick:N,className:"p-1 text-red-600 hover:text-red-700",title:"Cancel",children:(0,y.jsx)(x.A,{className:"w-4 h-4"})})]}):(0,y.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,y.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate flex-1 leading-tight",children:t.title||t.filename||"Untitled Video"}),g&&(0,y.jsx)("button",{onClick:()=>g(t),className:"ml-2 p-1 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity",title:"Edit title",children:(0,y.jsx)(m.A,{className:"w-4 h-4"})})]}),(0,y.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,y.jsx)("span",{children:(e=>{if(!e||e<=0)return"--:--";const t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(String(a).padStart(2,"0"))})(t.duration)}),(0,y.jsx)("span",{children:(e=>{if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]})(t.fileSize||t.size)})]}),(0,y.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,y.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:t.status||"unknown"}),(0,y.jsx)("span",{className:"text-xs text-gray-400",children:new Date(t.createdAt).toLocaleDateString()})]})]})]}):null};function f(){const{token:e,user:t}=(0,l.A)(),{stats:a}=(0,o.J)(),[n,r]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=!0;return(async()=>{try{const a=await i.A.get("/api/videos",{headers:{Authorization:"Bearer ".concat(e)}});let s=[];Array.isArray(a.data)?s=a.data:a.data&&Array.isArray(a.data.videos)?s=a.data.videos:a.data&&a.data.data&&Array.isArray(a.data.data)&&(s=a.data.data),t&&r(s)}catch(a){t&&r([])}finally{t&&d(!1)}})(),()=>{t=!1}},[e]),(0,y.jsx)("div",{className:"md:ml-56 lg:ml-64",style:{marginTop:"calc(var(--dashboard-header-bottom, 64px) + 12px)"},children:(0,y.jsxs)("div",{className:"px-6 pb-12",children:[(0,y.jsx)("h2",{className:"text-white text-xl font-semibold mb-4",children:null!==t&&void 0!==t&&t.name?"".concat(t.name,"'s Videos"):"My Files"}),c?(0,y.jsx)("div",{className:"text-white/70",children:"Loading your files..."}):Array.isArray(n)&&0!==n.length?(0,y.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>(0,y.jsx)(g,{video:e,stats:a},e._id||e.id))}):(0,y.jsx)("div",{className:"text-white/70",children:"No videos uploaded yet."})]})})}},4596:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]])},4830:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},7104:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7421:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]])},9855:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9940:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]])}}]);
//# sourceMappingURL=206.123b6af7.chunk.js.map