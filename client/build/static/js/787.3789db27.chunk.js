/*! For license information please see 787.3789db27.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkbuzz_smile_official_website_client=self.webpackChunkbuzz_smile_official_website_client||[]).push([[787],{2656:()=>{},2787:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ue});var i=s(5043),a=s(5016),l=s(3216),r=s(9742),n=s(1639);(0,n.A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),(0,n.A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),(0,n.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var o=s(7118),c=s(9333);(0,n.A)("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),(0,n.A)("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);var d=s(7365);(0,n.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var x=s(579);const h=()=>{var e,t,s,a,l,r,n,o,c,d,h,m,u,p,b,g,w,f,j,v,N,y,k,A,C,S,T,E,B,F,M,z,P,D,I,U,L,R,O,V,_,q,W,J,H,K,G;const[Q,$]=(0,i.useState)(null),[Y,Z]=(0,i.useState)([]),[X,ee]=(0,i.useState)(!0),[te,se]=(0,i.useState)(!0),[ie,ae]=(0,i.useState)(5),[le,re]=(0,i.useState)(null),[ne,oe]=(0,i.useState)([]),ce=(0,i.useRef)(null);(0,i.useEffect)(()=>(de(),xe(),()=>{ce.current&&clearInterval(ce.current)}),[]),(0,i.useEffect)(()=>(te?ce.current=setInterval(()=>{de(),xe()},1e3*ie):ce.current&&clearInterval(ce.current),()=>{ce.current&&clearInterval(ce.current)}),[te,ie]);const de=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:5002","/api/monitoring/metrics"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();$(e),oe(t=>{var s,i,a,l,r,n;return[...t,{timestamp:(new Date).toISOString(),cpu:(null===(s=e.system)||void 0===s||null===(i=s.cpu)||void 0===i?void 0:i.usage)||0,memory:(null===(a=e.system)||void 0===a||null===(l=a.memory)||void 0===l?void 0:l.usage)||0,disk:(null===(r=e.system)||void 0===r||null===(n=r.disk)||void 0===n?void 0:n.usage)||0}].slice(-20)}),re(null)}else re("Failed to fetch metrics")}catch(le){re("Error fetching metrics: "+le.message)}finally{ee(!1)}},xe=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:5002","/api/monitoring/alerts"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();Z(e.alerts||[])}}catch(le){console.error("Error fetching alerts:",le)}},he=(e,t)=>e>=((null===t||void 0===t?void 0:t.critical)||90)?"text-red-300 bg-red-500/10":e>=((null===t||void 0===t?void 0:t.warning)||80)?"text-yellow-300 bg-yellow-500/10":"text-green-300 bg-green-500/10",me=(e,t)=>e>=((null===t||void 0===t?void 0:t.critical)||90)?"bg-red-500":e>=((null===t||void 0===t?void 0:t.warning)||80)?"bg-yellow-500":"bg-green-500",ue=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},pe=e=>{var t,s;let{data:i,dataKey:a,color:l,label:r}=e;const n=Math.max(...i.map(e=>e[a]),100),o=100;if(i.length<2)return(0,x.jsx)("div",{className:"text-white/70 text-sm",children:"Collecting data..."});const c=i.map((e,t)=>{const s=t/(i.length-1)*300,l=o-e[a]/n*o;return"".concat(s,",").concat(l)}).join(" ");return(0,x.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:[(0,x.jsx)("h4",{className:"text-sm font-medium text-white mb-2",children:r}),(0,x.jsxs)("svg",{width:300,height:o,className:"border border-white/10 rounded",children:[(0,x.jsx)("polyline",{fill:"none",stroke:l,strokeWidth:"2",points:c}),(0,x.jsx)("defs",{children:(0,x.jsxs)("linearGradient",{id:"gradient-".concat(a),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,x.jsx)("stop",{offset:"0%",style:{stopColor:l,stopOpacity:.3}}),(0,x.jsx)("stop",{offset:"100%",style:{stopColor:l,stopOpacity:.1}})]})}),(0,x.jsx)("polygon",{fill:"url(#gradient-".concat(a,")"),points:"0,".concat(o," ").concat(c," ").concat(300,",").concat(o)})]}),(0,x.jsxs)("div",{className:"text-xs text-white/70 mt-1",children:["Current: ",null===(t=i[i.length-1])||void 0===t||null===(s=t[a])||void 0===s?void 0:s.toFixed(1),"%"]})]})};return X?(0,x.jsx)("div",{className:"py-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)("div",{className:"py-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-white",children:"System Monitoring"}),(0,x.jsx)("p",{className:"text-white/70",children:"Real-time system performance and health metrics"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("label",{className:"text-sm text-white/70",children:"Refresh:"}),(0,x.jsxs)("select",{value:ie,onChange:e=>ae(Number(e.target.value)),className:"px-2 py-1 border border-white/20 rounded text-sm bg-white/5 text-white",children:[(0,x.jsx)("option",{value:5,children:"5s"}),(0,x.jsx)("option",{value:10,children:"10s"}),(0,x.jsx)("option",{value:30,children:"30s"}),(0,x.jsx)("option",{value:60,children:"1m"})]})]}),(0,x.jsxs)("button",{onClick:()=>se(!te),className:"px-4 py-2 rounded-lg flex items-center space-x-2 ".concat(te?"bg-green-600 text-white":"bg-white/5 text-white hover:bg-white/10"),children:[(0,x.jsx)("span",{children:te?"\u23f8\ufe0f":"\u25b6\ufe0f"}),(0,x.jsx)("span",{children:te?"Stop":"Start"})]})]})]}),le&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-300",children:"\u274c"}),(0,x.jsx)("p",{className:"text-red-300 text-sm",children:le})]})}),Y.length>0&&(0,x.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:[(0,x.jsx)("h3",{className:"text-base font-semibold text-red-300 mb-2",children:"\ud83d\udea8 Active Alerts"}),(0,x.jsx)("div",{className:"space-y-2",children:Y.map((e,t)=>(0,x.jsxs)("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded border border-white/10",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"font-medium text-red-300",children:e.message}),(0,x.jsx)("p",{className:"text-sm text-red-300",children:new Date(e.timestamp).toLocaleString()})]}),(0,x.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");(await fetch("".concat("http://localhost:5002","/api/monitoring/alerts/").concat(e,"/resolve"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}})).ok&&xe()}catch(le){console.error("Error resolving alert:",le)}})(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Resolve"})]},t))})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",children:[(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"CPU Usage"}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udda5\ufe0f"})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,x.jsx)("span",{children:"Current"}),(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(he((null===Q||void 0===Q||null===(e=Q.system)||void 0===e||null===(t=e.cpu)||void 0===t?void 0:t.usage)||0)),children:[((null===Q||void 0===Q||null===(s=Q.system)||void 0===s||null===(a=s.cpu)||void 0===a?void 0:a.usage)||0).toFixed(1),"%"]})]}),(0,x.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,x.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(me((null===Q||void 0===Q||null===(l=Q.system)||void 0===l||null===(r=l.cpu)||void 0===r?void 0:r.usage)||0)),style:{width:"".concat((null===Q||void 0===Q||null===(n=Q.system)||void 0===n||null===(o=n.cpu)||void 0===o?void 0:o.usage)||0,"%")}})}),(0,x.jsxs)("div",{className:"text-xs text-white/70",children:["Cores: ",(null===Q||void 0===Q||null===(c=Q.system)||void 0===c||null===(d=c.cpu)||void 0===d?void 0:d.cores)||"N/A"]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Memory"}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcbe"})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,x.jsx)("span",{children:"Used"}),(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(he((null===Q||void 0===Q||null===(h=Q.system)||void 0===h||null===(m=h.memory)||void 0===m?void 0:m.usage)||0)),children:[((null===Q||void 0===Q||null===(u=Q.system)||void 0===u||null===(p=u.memory)||void 0===p?void 0:p.usage)||0).toFixed(1),"%"]})]}),(0,x.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,x.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(me((null===Q||void 0===Q||null===(b=Q.system)||void 0===b||null===(g=b.memory)||void 0===g?void 0:g.usage)||0)),style:{width:"".concat((null===Q||void 0===Q||null===(w=Q.system)||void 0===w||null===(f=w.memory)||void 0===f?void 0:f.usage)||0,"%")}})}),(0,x.jsxs)("div",{className:"text-xs text-white/70",children:[ue((null===Q||void 0===Q||null===(j=Q.system)||void 0===j||null===(v=j.memory)||void 0===v?void 0:v.used)||0)," / ",ue((null===Q||void 0===Q||null===(N=Q.system)||void 0===N||null===(y=N.memory)||void 0===y?void 0:y.total)||0)]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Disk Space"}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcbf"})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,x.jsx)("span",{children:"Used"}),(0,x.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(he((null===Q||void 0===Q||null===(k=Q.system)||void 0===k||null===(A=k.disk)||void 0===A?void 0:A.usage)||0)),children:[((null===Q||void 0===Q||null===(C=Q.system)||void 0===C||null===(S=C.disk)||void 0===S?void 0:S.usage)||0).toFixed(1),"%"]})]}),(0,x.jsx)("div",{className:"w-full bg-white/10 rounded-full h-2",children:(0,x.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(me((null===Q||void 0===Q||null===(T=Q.system)||void 0===T||null===(E=T.disk)||void 0===E?void 0:E.usage)||0)),style:{width:"".concat((null===Q||void 0===Q||null===(B=Q.system)||void 0===B||null===(F=B.disk)||void 0===F?void 0:F.usage)||0,"%")}})}),(0,x.jsxs)("div",{className:"text-xs text-white/70",children:[ue((null===Q||void 0===Q||null===(M=Q.system)||void 0===M||null===(z=M.disk)||void 0===z?void 0:z.used)||0)," / ",ue((null===Q||void 0===Q||null===(P=Q.system)||void 0===P||null===(D=P.disk)||void 0===D?void 0:D.total)||0)]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Uptime"}),(0,x.jsx)("span",{className:"text-2xl",children:"\u23f1\ufe0f"})]}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("div",{className:"text-2xl font-bold text-green-300",children:(e=>{const t=Math.floor(e/86400),s=Math.floor(e%86400/3600),i=Math.floor(e%3600/60);return t>0?"".concat(t,"d ").concat(s,"h ").concat(i,"m"):s>0?"".concat(s,"h ").concat(i,"m"):"".concat(i,"m")})((null===Q||void 0===Q||null===(I=Q.system)||void 0===I?void 0:I.uptime)||0)}),(0,x.jsxs)("div",{className:"text-xs text-white/70",children:["Since: ",null!==Q&&void 0!==Q&&null!==(U=Q.system)&&void 0!==U&&U.startTime?new Date(Q.system.startTime).toLocaleString():"Unknown"]})]})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 mb-5",children:[(0,x.jsx)(pe,{data:ne,dataKey:"cpu",color:"#3B82F6",label:"CPU Usage (%)"}),(0,x.jsx)(pe,{data:ne,dataKey:"memory",color:"#10B981",label:"Memory Usage (%)"}),(0,x.jsx)(pe,{data:ne,dataKey:"disk",color:"#8B5CF6",label:"Disk Usage (%)"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"API Performance"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Average Response Time"}),(0,x.jsxs)("span",{className:"font-semibold",children:[(null===Q||void 0===Q||null===(L=Q.performance)||void 0===L?void 0:L.avgResponseTime)||0,"ms"]})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Requests per Minute"}),(0,x.jsx)("span",{className:"font-semibold",children:(null===Q||void 0===Q||null===(R=Q.performance)||void 0===R?void 0:R.requestsPerMinute)||0})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Error Rate"}),(0,x.jsxs)("span",{className:"font-semibold ".concat(((null===Q||void 0===Q||null===(O=Q.performance)||void 0===O?void 0:O.errorRate)||0)>5?"text-red-300":"text-green-300"),children:[((null===Q||void 0===Q||null===(V=Q.performance)||void 0===V?void 0:V.errorRate)||0).toFixed(2),"%"]})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Active Connections"}),(0,x.jsx)("span",{className:"font-semibold",children:(null===Q||void 0===Q||null===(_=Q.performance)||void 0===_?void 0:_.activeConnections)||0})]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Database Performance"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Connection Pool"}),(0,x.jsxs)("span",{className:"font-semibold",children:[(null===Q||void 0===Q||null===(q=Q.database)||void 0===q?void 0:q.activeConnections)||0," / ",(null===Q||void 0===Q||null===(W=Q.database)||void 0===W?void 0:W.maxConnections)||0]})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Avg Query Time"}),(0,x.jsxs)("span",{className:"font-semibold",children:[(null===Q||void 0===Q||null===(J=Q.database)||void 0===J?void 0:J.avgQueryTime)||0,"ms"]})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Slow Queries"}),(0,x.jsx)("span",{className:"font-semibold ".concat(((null===Q||void 0===Q||null===(H=Q.database)||void 0===H?void 0:H.slowQueries)||0)>0?"text-red-300":"text-green-300"),children:(null===Q||void 0===Q||null===(K=Q.database)||void 0===K?void 0:K.slowQueries)||0})]}),(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Database Size"}),(0,x.jsx)("span",{className:"font-semibold",children:ue((null===Q||void 0===Q||null===(G=Q.database)||void 0===G?void 0:G.size)||0)})]})]})]})]})]})},m=()=>{const[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[l,r]=(0,i.useState)(!1),[n,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[h,m]=(0,i.useState)(null),[u,p]=(0,i.useState)(null),[b,g]=(0,i.useState)(null),[w,f]=(0,i.useState)([]),j="http://localhost:5002".replace(/\/$/,""),v=(0,i.useCallback)(e=>"".concat(j).concat(e),[j]),N=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),s=await fetch(v("/api/backup/list"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.backups||[])}else p("Failed to fetch backups")}catch(u){p("Error fetching backups: "+u.message)}finally{a(!1)}},[v]),y=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch(v("/api/backup/status"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();m(e)}}catch(u){console.error("Error fetching backup status:",u)}},[v]),k=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch(v("/api/backup-simple/list"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();f(e.backups||[])}}catch(u){console.error("Error fetching full backups:",u)}},[v]);(0,i.useEffect)(()=>{N(),y(),k()},[N,y,k]);const A=async()=>{r(!0),p(null),g(null);try{const e=localStorage.getItem("token"),t=await fetch(v("/api/backup/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok)await t.json(),g("Backup created successfully!"),N(),y();else{const e=await t.json();p(e.message||"Failed to create backup")}}catch(u){p("Error creating backup: "+u.message)}finally{r(!1)}},C=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},S=e=>new Date(e).toLocaleString();return s?(0,x.jsx)("div",{className:"py-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)("div",{className:"px-0 py-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Backup Manager"}),(0,x.jsx)("p",{className:"text-white/70",children:"Manage database backups and restore points"})]}),(0,x.jsx)("button",{onClick:A,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:l?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,x.jsx)("span",{children:"Creating..."})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"\ud83d\udcbe"}),(0,x.jsx)("span",{children:"Create Backup"})]})}),(0,x.jsx)("button",{onClick:async()=>{r(!0),p(null),g(null);try{const e=localStorage.getItem("token"),t=await fetch(v("/api/backup-simple/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok)await t.json(),g("Full website backup created successfully!"),k(),N(),y();else{const e=await t.json();p(e.message||"Failed to create full backup")}}catch(u){p("Error creating full backup: "+u.message)}finally{r(!1)}},disabled:l,className:"ml-3 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:l?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,x.jsx)("span",{children:"Creating..."})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{children:"\ud83c\udf10"}),(0,x.jsx)("span",{children:"Create Full Backup"})]})})]}),h&&(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mb-6",children:[(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Total Backups"}),(0,x.jsx)("p",{className:"text-xl font-bold text-blue-400",children:h.totalBackups||0})]})]})}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcbe"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Total Size"}),(0,x.jsx)("p",{className:"text-xl font-bold text-green-400",children:C(h.totalSize||0)})]})]})}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udd52"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Last Backup"}),(0,x.jsx)("p",{className:"text-sm font-bold text-purple-400",children:h.lastBackup?S(h.lastBackup):"Never"})]})]})})]}),u&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-400",children:"\u274c"}),(0,x.jsx)("p",{className:"text-red-300",children:u})]})}),b&&(0,x.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-green-400",children:"\u2705"}),(0,x.jsx)("p",{className:"text-green-300",children:b})]})}),(0,x.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-white/10",children:(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Available Backups"})}),0===e.length?(0,x.jsxs)("div",{className:"p-8 text-center",children:[(0,x.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udce6"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No backups found"}),(0,x.jsx)("p",{className:"text-white/70 mb-4",children:"Create your first backup to get started"}),(0,x.jsx)("button",{onClick:A,disabled:l,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Create First Backup"})]}):(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-white/10",children:[(0,x.jsx)("thead",{className:"bg-white/10",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Backup Name"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Created"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Size"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Type"}),(0,x.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-white/70 uppercase tracking-wider",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"bg-transparent divide-y divide-white/10",children:e.map((e,t)=>(0,x.jsxs)("tr",{className:"hover:bg-white/10",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcbe"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"text-sm font-medium text-white",children:e.name}),(0,x.jsx)("div",{className:"text-sm text-white/70",children:e.path})]})]})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:S(e.created)}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:C(e.size)}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.compressed?"bg-green-500/20 text-green-300":"bg-white/10 text-white/70"),children:e.compressed?"Compressed":"Standard"})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,x.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Are you sure you want to restore from backup "'.concat(e,'"? This will overwrite the current database.'))){o(e),p(null),g(null);try{const t=localStorage.getItem("token"),s=await fetch(v("/api/backup/restore/".concat(e)),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok)g('Database restored from backup "'.concat(e,'" successfully!'));else{const e=await s.json();p(e.message||"Failed to restore backup")}}catch(u){p("Error restoring backup: "+u.message)}finally{o(null)}}})(e.name),disabled:n===e.name,className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n===e.name?(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,x.jsx)("span",{children:"Restoring..."})]}):"\ud83d\udd04 Restore"}),(0,x.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Are you sure you want to delete backup "'.concat(e,'"? This action cannot be undone.'))){d(e),p(null),g(null);try{const t=localStorage.getItem("token"),s=await fetch(v("/api/backup/".concat(e)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok)g('Backup "'.concat(e,'" deleted successfully!')),N(),y();else{const e=await s.json();p(e.message||"Failed to delete backup")}}catch(u){p("Error deleting backup: "+u.message)}finally{d(null)}}})(e.name),disabled:c===e.name,className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:c===e.name?(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),(0,x.jsx)("span",{children:"Deleting..."})]}):"\ud83d\uddd1\ufe0f Delete"})]})})]},t))})]})})]}),h&&(0,x.jsxs)("div",{className:"mt-6 bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:"Backup Schedule"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"text-white/80",children:[(0,x.jsx)("strong",{children:"Interval:"})," Every ",h.interval||24," hours"]}),(0,x.jsxs)("p",{className:"text-white/80",children:[(0,x.jsx)("strong",{children:"Max Backups:"})," ",h.maxBackups||30]})]}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("p",{className:"text-white/80",children:[(0,x.jsx)("strong",{children:"Compression:"})," ",h.compression?"Enabled":"Disabled"]}),(0,x.jsxs)("p",{className:"text-white/80",children:[(0,x.jsx)("strong",{children:"Next Backup:"})," ",h.nextBackup?S(h.nextBackup):"Not scheduled"]})]})]})]}),(0,x.jsxs)("div",{className:"mt-6 bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Full Website Backups"}),(0,x.jsx)("span",{className:"text-sm text-white/70",children:"Includes database, server, client, config"})]}),0===w.length?(0,x.jsxs)("div",{className:"p-8 text-center",children:[(0,x.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\uddc2\ufe0f"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No full backups found"}),(0,x.jsx)("p",{className:"text-white/70 mb-4",children:"Create a full backup to download your complete site"})]}):(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-white/10",children:[(0,x.jsx)("thead",{className:"bg-white/10",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Backup Name"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Created"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Size"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Type"}),(0,x.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-white/70 uppercase tracking-wider",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"bg-transparent divide-y divide-white/10",children:w.map((e,t)=>(0,x.jsxs)("tr",{className:"hover:bg-white/10",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udce6"}),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"text-sm font-medium text-white",children:e.name})})]})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:S(e.created)}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:C(e.size)}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.compressed?"bg-green-500/20 text-green-300":"bg-white/10 text-white/70"),children:e.compressed?"Compressed":"Standard"})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,x.jsx)("div",{className:"flex justify-end space-x-2",children:(0,x.jsx)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token"),s=await fetch(v("/api/backup-simple/download/".concat(e)),{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw new Error("Failed to download backup");const i=await s.blob(),a=s.headers.get("Content-Disposition");let l="".concat(e,".zip");if(a){const e=a.match(/filename="([^"]+)"/);e&&e[1]&&(l=e[1])}const r=window.URL.createObjectURL(i),n=document.createElement("a");n.style.display="none",n.href=r,n.download=l,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}catch(u){console.error("Download error:",u),alert("Failed to download backup")}})(e.name),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700",children:"\ud83d\udce5 Download"})})})]},t))})]})})]})]})},u=()=>{const[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)([]),[l,r]=(0,i.useState)(!0),[n,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),[h,m]=(0,i.useState)("all"),[u,p]=(0,i.useState)("all"),[b,g]=(0,i.useState)("today"),[w,f]=(0,i.useState)(null),[j,v]=(0,i.useState)(null),N=(0,i.useRef)(null),y=(0,i.useRef)(null),k=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),s=new URLSearchParams({level:"all"!==h?h:"",category:"all"!==u?u:"",dateRange:b,limit:1e3}),i=await fetch("".concat("http://localhost:5002","/api/monitoring/logs?").concat(s),{headers:{Authorization:"Bearer ".concat(e)}});if(i.ok){const e=await i.json();t(e.logs||[]),v(null)}else v("Failed to fetch logs")}catch(j){v("Error fetching logs: "+j.message)}finally{r(!1)}},[h,u,b]),A=(0,i.useCallback)(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:5002","/api/monitoring/logs/stats"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();f(e)}}catch(j){console.error("Error fetching log stats:",j)}},[]),C=(0,i.useCallback)(()=>{let t=[...e];c&&(t=t.filter(e=>e.message.toLowerCase().includes(c.toLowerCase())||e.meta&&JSON.stringify(e.meta).toLowerCase().includes(c.toLowerCase()))),"all"!==h&&(t=t.filter(e=>e.level===h)),"all"!==u&&(t=t.filter(e=>e.category===u)),a(t)},[e,c,h,u]);(0,i.useEffect)(()=>(k(),A(),()=>{N.current&&clearInterval(N.current)}),[k,A]),(0,i.useEffect)(()=>(n?N.current=setInterval(k,5e3):N.current&&clearInterval(N.current),()=>{N.current&&clearInterval(N.current)}),[n,k]),(0,i.useEffect)(()=>{C()},[C]);const S=e=>{switch(e){case"error":return"text-red-300 bg-red-500/10";case"warn":return"text-yellow-300 bg-yellow-500/10";case"info":return"text-blue-300 bg-blue-500/10";default:return"text-white/70 bg-white/10"}},T=e=>{switch(e){case"error":return"\u274c";case"warn":return"\u26a0\ufe0f";case"info":return"\u2139\ufe0f";case"debug":return"\ud83d\udd0d";default:return"\ud83d\udcdd"}};return l?(0,x.jsx)("div",{className:"py-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)("div",{className:"px-0 py-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Logs Viewer"}),(0,x.jsx)("p",{className:"text-white/70",children:"Monitor system logs and activities"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsxs)("button",{onClick:()=>o(!n),className:"px-4 py-2 rounded-lg flex items-center space-x-2 ".concat(n?"bg-green-600 text-white":"bg-white/10 text-white hover:bg-white/20"),children:[(0,x.jsx)("span",{children:n?"\u23f8\ufe0f":"\u25b6\ufe0f"}),(0,x.jsx)("span",{children:n?"Stop":"Auto Refresh"})]}),(0,x.jsxs)("button",{onClick:()=>{const e=JSON.stringify(s,null,2),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),i="logs-".concat((new Date).toISOString().split("T")[0],".json"),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",i),a.click()},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,x.jsx)("span",{children:"\ud83d\udce5"}),(0,x.jsx)("span",{children:"Export"})]}),(0,x.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to clear all logs? This action cannot be undone."))try{const e=localStorage.getItem("token");(await fetch("".concat("http://localhost:5002","/api/monitoring/logs/clean"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})).ok?(t([]),a([]),A()):v("Failed to clear logs")}catch(j){v("Error clearing logs: "+j.message)}},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center space-x-2",children:[(0,x.jsx)("span",{children:"\ud83d\uddd1\ufe0f"}),(0,x.jsx)("span",{children:"Clear"})]})]})]}),w&&(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\u274c"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Errors"}),(0,x.jsx)("p",{className:"text-xl font-bold text-red-400",children:w.errors||0})]})]})}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\u26a0\ufe0f"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Warnings"}),(0,x.jsx)("p",{className:"text-xl font-bold text-yellow-300",children:w.warnings||0})]})]})}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\u2139\ufe0f"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Info"}),(0,x.jsx)("p",{className:"text-xl font-bold text-blue-400",children:w.info||0})]})]})}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcdd"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs text-white/80 font-medium",children:"Total"}),(0,x.jsx)("p",{className:"text-xl font-bold text-white",children:w.total||0})]})]})})]}),(0,x.jsx)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 mb-6",children:(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Search"}),(0,x.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Search logs...",className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Level"}),(0,x.jsx)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["all","error","warn","info","debug"].map(e=>(0,x.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Category"}),(0,x.jsx)("select",{value:u,onChange:e=>p(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["all","api","user","security","performance","database","file","video","auth","system"].map(e=>(0,x.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Date Range"}),(0,x.jsx)("select",{value:b,onChange:e=>g(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"week",label:"Last 7 days"},{value:"month",label:"Last 30 days"}].map(e=>(0,x.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,x.jsx)("div",{className:"flex items-end",children:(0,x.jsxs)("button",{onClick:()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},className:"w-full bg-white/10 text-white px-4 py-2 rounded-lg hover:bg-white/20 flex items-center justify-center space-x-2",children:[(0,x.jsx)("span",{children:"\u2b07\ufe0f"}),(0,x.jsx)("span",{children:"Bottom"})]})})]})}),j&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-400",children:"\u274c"}),(0,x.jsx)("p",{className:"text-red-300",children:j})]})}),(0,x.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg overflow-hidden",children:[(0,x.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex justify-between items-center",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Logs (",s.length,")"]}),n&&(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-green-400",children:[(0,x.jsx)("div",{className:"animate-pulse w-2 h-2 bg-green-500 rounded-full"}),(0,x.jsx)("span",{className:"text-sm",children:"Live"})]})]}),(0,x.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===s.length?(0,x.jsxs)("div",{className:"p-8 text-center",children:[(0,x.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcdd"}),(0,x.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No logs found"}),(0,x.jsx)("p",{className:"text-white/70",children:"Try adjusting your filters or check back later"})]}):(0,x.jsxs)("div",{className:"divide-y divide-white/10",children:[s.map((e,t)=>{return(0,x.jsx)("div",{className:"p-4 hover:bg-white/10",children:(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,x.jsx)("span",{className:"text-xl flex-shrink-0 mt-1",children:T(e.level)}),(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,x.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(S(e.level)),children:e.level.toUpperCase()}),e.category&&(0,x.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-white/10 text-white/70",children:e.category}),(0,x.jsx)("span",{className:"text-xs text-white/70",children:(s=e.timestamp,new Date(s).toLocaleString())})]}),(0,x.jsx)("p",{className:"text-sm text-white mb-2",children:e.message}),e.meta&&Object.keys(e.meta).length>0&&(0,x.jsxs)("details",{className:"text-xs",children:[(0,x.jsx)("summary",{className:"cursor-pointer text-blue-300 hover:text-blue-200",children:"Show details"}),(0,x.jsx)("pre",{className:"mt-2 p-2 bg-white/10 rounded text-white/80 overflow-x-auto",children:JSON.stringify(e.meta,null,2)})]})]})]})},t);var s}),(0,x.jsx)("div",{ref:y})]})})]})]})};var p=s(2555),b=s(3768);const g=e=>{const t="http://localhost:5002".replace(/\/$/,""),s=/\/api$/.test(t)?"":"/api";return"".concat(t).concat(s).concat(e)},w=()=>{const[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[l,r]=(0,i.useState)(null),[n,o]=(0,i.useState)(""),[c,d]=(0,i.useState)("all"),[h,m]=(0,i.useState)("all"),[u,w]=(0,i.useState)([]),[f,j]=(0,i.useState)(!1),[v,N]=(0,i.useState)(null),[y,k]=(0,i.useState)({}),[A,C]=(0,i.useState)(1),[S]=(0,i.useState)(10),[T,E]=(0,i.useState)(!1),[B,F]=(0,i.useState)({name:"",email:"",role:"user",isActive:!0,password:"",confirmPassword:""}),[M,z]=(0,i.useState)(!1),[P,D]=(0,i.useState)(null),[I,U]=(0,i.useState)(""),[L,R]=(0,i.useState)(!1),[O,V]=(0,i.useState)(""),_=(0,i.useRef)(null),[q,W]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=e=>{"Escape"===e.key&&(f&&G(),M&&$())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[f,M]),(0,i.useEffect)(()=>{q&&f&&_.current&&_.current.focus()},[q,f]),(0,i.useEffect)(()=>{J(),H()},[]);const J=async()=>{try{const e=localStorage.getItem("token");console.log("Fetching users with token:",e?"Token exists":"No token"),console.log("API URL:","http://localhost:5002");const s=await fetch(g("/admin/users"),{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Users API response status:",s.status),s.ok){const e=await s.json();console.log("Users data received:",e),t(e.users||e||[]),r(null)}else{const e=await s.text();console.error("Users API error:",s.status,e),r("Failed to fetch users: ".concat(s.status," ").concat(e))}}catch(l){console.error("Error fetching users:",l),r("Error fetching users: "+l.message)}finally{a(!1)}},H=async()=>{try{const e=localStorage.getItem("token"),t=await fetch(g("/admin/users/stats"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();k(e)}}catch(l){console.error("Error fetching user stats:",l)}},K=async e=>{if(0!==u.length&&window.confirm("Are you sure you want to ".concat(e," ").concat(u.length," user(s)?")))try{const t=localStorage.getItem("token");(await fetch(g("/admin/users/bulk"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({userIds:u,action:e})})).ok?(J(),H(),w([])):r("Failed to ".concat(e," users"))}catch(l){r("Error ".concat(e," users: ")+l.message)}},G=()=>{j(!1),N(null),F({name:"",email:"",role:"user",isActive:!0,password:"",confirmPassword:""})},Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(N(e),F({name:e.name||"",email:e.email||"",role:e.role||"user",isActive:"active"===e.status||e.isActive,password:"",confirmPassword:""})):(N(null),F({name:"",email:"",role:"user",isActive:!0,password:"",confirmPassword:""})),W(!1),j(!0)},$=()=>{z(!1),D(null),U(""),V("")},Y=e.filter(e=>{var t,s;const i=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase())),a="all"===c||e.role===c,l="all"===h||"active"===h&&e.isActive||"inactive"===h&&!e.isActive;return i&&a&&l}),Z=A*S,X=Z-S,ee=Y.slice(X,Z),te=Math.ceil(Y.length/S),se=e=>{switch(e){case"admin":return"bg-red-500/20 text-red-300";case"moderator":return"bg-yellow-500/20 text-yellow-300";case"premium":return"bg-purple-500/20 text-purple-300";default:return"bg-white/10 text-white/70"}};return s?(0,x.jsx)("div",{className:"py-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"px-0 py-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-white",children:"User Management"}),(0,x.jsx)("p",{className:"text-white/70",children:"Manage users, roles, and permissions"})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsxs)("button",{onClick:()=>{const t="data:text/csv;charset=utf-8,Name,Email,Role,Status,Joined,Last Active\n"+e.map(e=>"".concat(e.name||"N/A",",").concat(e.email,",").concat(e.role,",").concat(e.status||(e.isActive?"active":"inactive"),",").concat(e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A",",").concat(e.lastActive?new Date(e.lastActive).toLocaleDateString():"Never")).join("\n"),s=encodeURI(t),i=document.createElement("a");i.setAttribute("href",s),i.setAttribute("download","users.csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},className:"bg-green-600 text-white px-3 py-1.5 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,x.jsx)("span",{children:"\ud83d\udcca"}),(0,x.jsx)("span",{children:"Export"})]}),(0,x.jsxs)("button",{onClick:()=>Q(),className:"bg-blue-600 text-white px-3 py-1.5 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,x.jsx)("span",{children:"\u2795"}),(0,x.jsx)("span",{children:"Add User"})]})]})]}),l&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-300",children:"\u274c"}),(0,x.jsx)("p",{className:"text-red-300 text-sm",children:l})]})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-2",children:[(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-2",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Total Users"}),(0,x.jsx)("p",{className:"text-xl font-bold text-white",children:y.users||0})]}),(0,x.jsx)("span",{className:"text-3xl",children:"\ud83d\udc65"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-2",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Total Videos"}),(0,x.jsx)("p",{className:"text-xl font-bold text-green-400",children:y.videos||0})]}),(0,x.jsx)("span",{className:"text-3xl",children:"\ud83c\udfa5"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-2",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Admin Users"}),(0,x.jsx)("p",{className:"text-xl font-bold text-purple-400",children:y.admins||0})]}),(0,x.jsx)("span",{className:"text-3xl",children:"\u2b50"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-2",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"System Status"}),(0,x.jsx)("p",{className:"text-xl font-bold text-blue-400",children:"Online"})]}),(0,x.jsx)("span",{className:"text-3xl",children:"\ud83d\udcc8"})]})})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-2 mb-2",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 mb-2",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Search"}),(0,x.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:n,onChange:e=>o(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Role"}),(0,x.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,x.jsx)("option",{value:"all",children:"All Roles"}),(0,x.jsx)("option",{value:"user",children:"User"}),(0,x.jsx)("option",{value:"premium",children:"Premium"}),(0,x.jsx)("option",{value:"moderator",children:"Moderator"}),(0,x.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Status"}),(0,x.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"w-full px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,x.jsx)("option",{value:"all",children:"All Status"}),(0,x.jsx)("option",{value:"active",children:"Active"}),(0,x.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,x.jsx)("div",{className:"flex items-end",children:(0,x.jsx)("button",{onClick:()=>{o(""),d("all"),m("all")},className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600",children:"Clear Filters"})})]}),u.length>0&&(0,x.jsxs)("div",{className:"flex items-center justify-between bg-blue-500/10 p-3 rounded-lg",children:[(0,x.jsxs)("span",{className:"text-sm text-blue-300",children:[u.length," user(s) selected"]}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("button",{onClick:()=>K("activate"),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Activate"}),(0,x.jsx)("button",{onClick:()=>K("deactivate"),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Deactivate"}),(0,x.jsx)("button",{onClick:()=>w([]),className:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600",children:"Clear"})]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 overflow-hidden",children:[(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-white/10",children:[(0,x.jsx)("thead",{className:"bg-white/10",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:(0,x.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?w(ee.map(e=>e._id)):w([])},checked:u.length===ee.length&&ee.length>0})}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"User"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Role"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Credits"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Status"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Joined"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Last Active"}),(0,x.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"bg-transparent divide-y divide-white/10",children:ee.map(e=>{var t,s,i,a;return(0,x.jsxs)("tr",{className:"hover:bg-white/10",children:[(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,x.jsx)("input",{type:"checkbox",checked:u.includes(e._id),onChange:t=>{t.target.checked?w([...u,e._id]):w(u.filter(t=>t!==e._id))}})}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,x.jsx)("div",{className:"h-10 w-10 rounded-full bg-white/10 flex items-center justify-center",children:(0,x.jsx)("span",{className:"text-sm font-medium text-white/70",children:(null===(t=e.name)||void 0===t||null===(s=t.charAt(0))||void 0===s?void 0:s.toUpperCase())||"?"})})}),(0,x.jsxs)("div",{className:"ml-3",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-white",children:e.name||"N/A"}),(0,x.jsx)("div",{className:"text-sm text-white/70",children:e.email})]})]})}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,x.jsxs)("select",{value:e.role,onChange:t=>(async(e,t)=>{try{const s=localStorage.getItem("token"),i=await fetch(g("/admin/users/".concat(e,"/role")),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({role:t})});if(i.ok)J(),b.oR.success("User role updated successfully");else{const e=await i.json();r(e.message||"Failed to update user role")}}catch(l){console.error("Error updating user role:",l),r("Failed to update user role")}})(e._id,t.target.value),className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(se(e.role)),children:[(0,x.jsx)("option",{value:"user",children:"User"}),(0,x.jsx)("option",{value:"premium",children:"Premium"}),(0,x.jsx)("option",{value:"moderator",children:"Moderator"}),(0,x.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-500/20 text-amber-300",children:"number"===typeof(null===e||void 0===e||null===(i=e.credits)||void 0===i?void 0:i.balance)?e.credits.balance:0})}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,x.jsx)("button",{onClick:()=>(async(e,t)=>{try{const s=localStorage.getItem("token"),i=await fetch(g("/admin/users/".concat(e,"/status")),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({isActive:t})});if(i.ok)J(),b.oR.success("User ".concat(t?"activated":"deactivated"," successfully"));else{const e=await i.json();r(e.message||"Failed to update user status")}}catch(l){console.error("Error updating user status:",l),r("Failed to update user status")}})(e._id,!e.isActive),className:"px-2 py-1 rounded-full text-xs font-semibold ".concat((a=e.isActive,a?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300")),children:e.isActive?"Active":"Inactive"})}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-white/70",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-white/70",children:e.lastActive?new Date(e.lastActive).toLocaleDateString():"Never"}),(0,x.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsxs)("button",{onClick:()=>{N(e),j(!0)},className:"text-blue-400 hover:text-blue-300 flex items-center space-x-1",title:"Edit user",children:[(0,x.jsx)("span",{children:"\u270f\ufe0f"}),(0,x.jsx)("span",{className:"sr-only",children:"Edit"})]}),(0,x.jsxs)("button",{onClick:()=>(e=>{Q(e),W(!0),setTimeout(()=>{var e;null===(e=_.current)||void 0===e||e.focus()},0)})(e),className:"text-indigo-400 hover:text-indigo-300 flex items-center space-x-1",title:"Change password",children:[(0,x.jsx)("span",{children:"\ud83d\udd12"}),(0,x.jsx)("span",{className:"sr-only",children:"Change Password"})]}),(0,x.jsxs)("button",{onClick:()=>(e=>{D(e),U(""),V(""),z(!0)})(e),className:"text-amber-400 hover:text-amber-300 flex items-center space-x-1",title:"Add credits",children:[(0,x.jsx)("span",{children:"\ud83e\ude99"}),(0,x.jsx)("span",{className:"sr-only",children:"Add Credits"})]}),(0,x.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to reset this user's password? They will receive an email with a new temporary password."))try{const t=localStorage.getItem("token"),s=await fetch(g("/admin/users/".concat(e,"/reset-password")),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok)alert("Password reset email sent successfully");else{const e=await s.json();r(e.message||"Failed to reset password")}}catch(l){console.error("Error resetting password:",l),r("Failed to reset password")}})(e._id),className:"text-yellow-400 hover:text-yellow-300 flex items-center space-x-1",title:"Reset password",children:[(0,x.jsx)("span",{children:"\u267b\ufe0f"}),(0,x.jsx)("span",{className:"sr-only",children:"Reset Password"})]}),(0,x.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{const t=localStorage.getItem("token"),s=await fetch(g("/admin/users/".concat(e)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(s.ok)J(),H(),b.oR.success("User deleted successfully");else{const e=await s.json();r(e.message||"Failed to delete user")}}catch(l){console.error("Error deleting user:",l),r("Failed to delete user")}})(e._id),className:"text-red-400 hover:text-red-300 flex items-center space-x-1",title:"Delete user",children:[(0,x.jsx)("span",{children:"\ud83d\uddd1\ufe0f"}),(0,x.jsx)("span",{className:"sr-only",children:"Delete"})]})]})})]},e._id)})})]})}),te>1&&(0,x.jsxs)("div",{className:"bg-white/5 px-3 py-2 flex items-center justify-between border-t border-white/10 text-white",children:[(0,x.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,x.jsx)("button",{onClick:()=>C(Math.max(1,A-1)),disabled:1===A,className:"relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/5 hover:bg-white/10 disabled:opacity-50",children:"Previous"}),(0,x.jsx)("button",{onClick:()=>C(Math.min(te,A+1)),disabled:A===te,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/5 hover:bg-white/10 disabled:opacity-50",children:"Next"})]}),(0,x.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,x.jsx)("div",{children:(0,x.jsxs)("p",{className:"text-sm text-white/70",children:["Showing ",(0,x.jsx)("span",{className:"font-medium",children:X+1})," to"," ",(0,x.jsx)("span",{className:"font-medium",children:Math.min(Z,Y.length)})," of"," ",(0,x.jsx)("span",{className:"font-medium",children:Y.length})," results"]})}),(0,x.jsx)("div",{children:(0,x.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:te},(e,t)=>t+1).map(e=>(0,x.jsx)("button",{onClick:()=>C(e),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===A?"z-10 bg-blue-500/20 border-blue-500 text-blue-300":"bg-white/5 border-white/20 text-white/70 hover:bg-white/10"),children:e},e))})})]})]})]}),0===Y.length&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)("span",{className:"text-white/50 text-6xl",children:"\ud83d\udc65"}),(0,x.jsx)("h3",{className:"mt-2 text-sm font-semibold text-white",children:"No users found"}),(0,x.jsx)("p",{className:"mt-1 text-sm text-white/70",children:n||"all"!==c||"all"!==h?"Try adjusting your search or filter criteria.":"Get started by adding your first user."})]})]}),M&&(0,x.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,x.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:$}),(0,x.jsxs)("div",{className:"relative w-full max-w-md mx-auto px-4 py-4 rounded-2xl border border-white/20 shadow-xl backdrop-blur-xl bg-white/10 text-white",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"text-amber-600 text-xl",children:"\ud83e\ude99"}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Add Credits"})]}),(0,x.jsx)("button",{onClick:$,className:"p-2 rounded-full hover:bg-white/20","aria-label":"Close",children:"\u2715"})]}),(0,x.jsxs)("p",{className:"text-sm text-white/70 mb-4",children:["Add credits to ",(0,x.jsx)("span",{className:"font-medium",children:null===P||void 0===P?void 0:P.email})]}),O&&(0,x.jsx)("div",{className:"mb-3 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg px-3 py-2 text-sm",children:O}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseFloat(I);if(Number.isNaN(t)||t<=0)V("Please enter a valid positive number.");else if(null!==P&&void 0!==P&&P._id)try{R(!0),V("");const e=localStorage.getItem("token"),l=g("/admin/users/".concat(P._id,"/credits")),r=await fetch(l,{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({amount:t})});if(r.ok){var s,i,a;const e=await r.json().catch(()=>({}));$();const l=null===e||void 0===e||null===(s=e.user)||void 0===s||null===(i=s.credits)||void 0===i?void 0:i.balance,n=(null===e||void 0===e||null===(a=e.user)||void 0===a?void 0:a.email)||(null===P||void 0===P?void 0:P.email),o=void 0!==l?"".concat(t," credits added to ").concat(n,". New balance: ").concat(l,"."):"".concat(t," credits added to ").concat(n,".");b.oR.success(o),J()}else{const e=await r.json().catch(()=>({}));V(e.message||"Failed to add credits")}}catch(l){console.error("Error adding credits:",l),V("Failed to add credits")}finally{R(!1)}else V("No user selected.")},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Amount"}),(0,x.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 border border-white/20 rounded-lg px-3 py-2",children:[(0,x.jsx)("span",{className:"text-amber-600",children:"\ud83e\ude99"}),(0,x.jsx)("input",{type:"number",min:"1",step:"1",value:I,onChange:e=>U(e.target.value),placeholder:"Enter credits, e.g., 10",className:"w-full bg-transparent outline-none placeholder-white/50 text-white"})]})]}),(0,x.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,x.jsx)("button",{type:"button",onClick:$,className:"px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 text-white",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:L,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:L?"Adding\u2026":"Add Credits"})]})]})]})]}),f&&(0,x.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,x.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:G}),(0,x.jsxs)("div",{className:"relative w-full max-w-md mx-auto px-4 py-4 rounded-2xl border border-white/20 shadow-xl backdrop-blur-xl bg-white/10 text-white",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:v?"Edit User":"Add New User"}),(0,x.jsx)("button",{onClick:G,className:"p-2 rounded-full hover:bg-white/20","aria-label":"Close",children:"\u2715"})]}),l&&(0,x.jsx)("div",{className:"mb-3 bg-red-500/10 border border-red-500/30 text-red-300 rounded-lg px-3 py-2 text-sm",children:l}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),B.password&&B.password!==B.confirmPassword)r("Passwords do not match");else{E(!0),r("");try{const e=localStorage.getItem("token"),t={name:B.name,email:B.email,role:B.role,status:B.isActive?"active":"inactive"};let s;if(B.password&&(t.password=B.password),s=v?await fetch(g("/admin/users/".concat(v._id)),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}):await fetch(g("/admin/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)}),s.ok)G(),J(),H();else{const e=await s.json();r(e.message||"Failed to save user")}}catch(l){console.error("Error saving user:",l),r("Failed to save user")}finally{E(!1)}}},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Name"}),(0,x.jsx)("input",{type:"text",value:B.name,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Email"}),(0,x.jsx)("input",{type:"email",value:B.email,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Role"}),(0,x.jsxs)("select",{value:B.role,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"user",children:"User"}),(0,x.jsx)("option",{value:"premium",children:"Premium"}),(0,x.jsx)("option",{value:"moderator",children:"Moderator"}),(0,x.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,x.jsx)("div",{children:(0,x.jsxs)("label",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",checked:B.isActive,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{isActive:e.target.checked})),className:"rounded border-white/20 text-blue-500 focus:ring-blue-500 bg-white/5"}),(0,x.jsx)("span",{className:"ml-2 text-sm text-white/80",children:"Active"})]})}),v&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"New Password (leave blank to keep current)"}),(0,x.jsx)("input",{type:"password",ref:_,value:B.password,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{password:e.target.value})),placeholder:"Enter new password",className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),v&&B.password&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Confirm New Password"}),(0,x.jsx)("input",{type:"password",value:B.confirmPassword,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{confirmPassword:e.target.value})),placeholder:"Confirm new password",className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),!v&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Password"}),(0,x.jsx)("input",{type:"password",value:B.password,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),!v&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-white/80 mb-1",children:"Confirm Password"}),(0,x.jsx)("input",{type:"password",value:B.confirmPassword,onChange:e=>F((0,p.A)((0,p.A)({},B),{},{confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-white/20 rounded-lg bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,x.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,x.jsx)("button",{type:"button",onClick:G,className:"px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 text-white",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:T,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:T?"Saving\u2026":v?"Update User":"Create User"})]})]})]})]})]})},f=()=>{const[e,t]=(0,i.useState)([]),[s,a]=(0,i.useState)(!0),[l,r]=(0,i.useState)(null),[n,o]=(0,i.useState)(""),[c,d]=(0,i.useState)("all"),[h,m]=(0,i.useState)(1),[u]=(0,i.useState)(10),[b,g]=(0,i.useState)([]),[w,f]=(0,i.useState)({});(0,i.useEffect)(()=>{j(),v()},[]);const j=async()=>{try{const e=localStorage.getItem("token");console.log("Fetching videos with token:",e?"Token exists":"No token"),console.log("API URL:","http://localhost:5002");const s=await fetch("/api/admin/videos",{headers:{Authorization:"Bearer ".concat(e)}});if(console.log("Videos API response status:",s.status),s.ok){const i=await s.json();console.log("Videos data received:",i);const a=(i.videos||i||[]).map(t=>(0,p.A)((0,p.A)({},t),{},{thumbnail:"".concat("http://localhost:5002","/api/videos/").concat(t._id,"/thumbnail?token=").concat(encodeURIComponent(e||""))}));t(a),r(null)}else{const e=await s.text();console.error("Videos API error:",s.status,e),r("Failed to fetch videos: ".concat(s.status," ").concat(e))}}catch(l){console.error("Error fetching videos:",l),r("Error fetching videos: "+l.message)}finally{a(!1)}},v=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("/api/admin/stats",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();f(e)}}catch(l){console.error("Error fetching video stats:",l)}},N=e.filter(e=>{var t,s,i,a;const l=(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(n.toLowerCase()))||(null===(i=e.user)||void 0===i||null===(a=i.name)||void 0===a?void 0:a.toLowerCase().includes(n.toLowerCase())),r="all"===c||"public"===c&&e.isPublic||"private"===c&&!e.isPublic;return l&&r}),y=h*u,k=y-u,A=N.slice(k,y),C=Math.ceil(N.length/u),S=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},T=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),i=Math.floor(e%60);return t>0?"".concat(t,":").concat(s.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0")):"".concat(s,":").concat(i.toString().padStart(2,"0"))};return s?(0,x.jsx)("div",{className:"p-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:[(0,x.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Video Management"}),(0,x.jsx)("p",{className:"text-white/70",children:"Manage videos and content"})]})}),l&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-300",children:"\u274c"}),(0,x.jsx)("p",{className:"text-red-300 text-sm",children:l})]})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Total Videos"}),(0,x.jsx)("p",{className:"text-xl font-bold text-white",children:w.videos||0})]}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83c\udfa5"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Public Videos"}),(0,x.jsx)("p",{className:"text-xl font-bold text-green-400",children:e.filter(e=>e.isPublic).length})]}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83c\udf10"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Private Videos"}),(0,x.jsx)("p",{className:"text-xl font-bold text-orange-400",children:e.filter(e=>!e.isPublic).length})]}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udd12"})]})}),(0,x.jsx)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-4",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-xs font-medium text-white/80",children:"Total Storage"}),(0,x.jsx)("p",{className:"text-xl font-bold text-blue-400",children:S(e.reduce((e,t)=>e+(t.fileSize||0),0))})]}),(0,x.jsx)("span",{className:"text-2xl",children:"\ud83d\udcbe"})]})})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 p-4 mb-4",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Search"}),(0,x.jsx)("input",{type:"text",placeholder:"Search videos...",value:n,onChange:e=>o(e.target.value),className:"w-full px-2.5 py-1.5 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Status"}),(0,x.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-2.5 py-1.5 border border-white/20 rounded-md bg-white/5 text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,x.jsx)("option",{value:"all",children:"All Videos"}),(0,x.jsx)("option",{value:"public",children:"Public"}),(0,x.jsx)("option",{value:"private",children:"Private"})]})]})]}),b.length>0&&(0,x.jsxs)("div",{className:"flex items-center justify-between bg-blue-50 p-3 rounded-lg",children:[(0,x.jsxs)("span",{className:"text-sm text-blue-700",children:[b.length," video(s) selected"]}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete ".concat(b.length," videos?")))try{const s=localStorage.getItem("token"),i=b.map(e=>fetch("/api/admin/videos/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}}));await Promise.all(i),t(e.filter(e=>!b.includes(e._id))),g([]),v()}catch(l){r("Error deleting videos: "+l.message)}},className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Delete"}),(0,x.jsx)("button",{onClick:()=>g([]),className:"bg-gray-500 text-white px-3 py-1 rounded text-sm hover:bg-gray-600",children:"Clear"})]})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-lg shadow-sm border border-white/10 overflow-hidden",children:[(0,x.jsx)("div",{className:"overflow-x-auto",children:(0,x.jsxs)("table",{className:"min-w-full divide-y divide-white/10",children:[(0,x.jsx)("thead",{className:"bg-white/10",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:(0,x.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?g(A.map(e=>e._id)):g([])},checked:b.length===A.length&&A.length>0})}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Video"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Owner"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Status"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Duration"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Size"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Created"}),(0,x.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-white/70 uppercase tracking-wider",children:"Actions"})]})}),(0,x.jsx)("tbody",{className:"bg-transparent divide-y divide-white/10",children:A.map(s=>{var i,a;return(0,x.jsxs)("tr",{className:"hover:bg-white/10",children:[(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,x.jsx)("input",{type:"checkbox",checked:b.includes(s._id),onChange:e=>{e.target.checked?g([...b,s._id]):g(b.filter(e=>e!==s._id))}})}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0 h-12 w-16",children:s.thumbnail?(0,x.jsx)("img",{src:s.thumbnail,alt:s.title,className:"h-12 w-16 object-cover rounded"}):(0,x.jsx)("div",{className:"h-12 w-16 bg-white/10 rounded flex items-center justify-center",children:(0,x.jsx)("span",{className:"text-xs text-white/70",children:"\ud83c\udfa5"})})}),(0,x.jsxs)("div",{className:"ml-3",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-white truncate max-w-xs",children:s.title||"Untitled"}),(0,x.jsx)("div",{className:"text-sm text-white/70 truncate max-w-xs",children:s.description||"No description"})]})]})}),(0,x.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,x.jsx)("div",{className:"text-sm text-white",children:(null===(i=s.user)||void 0===i?void 0:i.name)||"Unknown"}),(0,x.jsx)("div",{className:"text-sm text-white/70",children:(null===(a=s.user)||void 0===a?void 0:a.email)||"N/A"})]}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(s.isPublic?"bg-green-500/20 text-green-300":"bg-orange-500/20 text-orange-300"),children:s.isPublic?"Public":"Private"})}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:s.duration?T(s.duration):"N/A"}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white",children:s.fileSize?S(s.fileSize):"N/A"}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-white/70",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"}),(0,x.jsx)("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("button",{onClick:()=>window.open(s.url,"_blank"),className:"text-blue-400 hover:text-blue-300",disabled:!s.url,children:"View"}),(0,x.jsx)("button",{onClick:()=>(async s=>{if(window.confirm("Are you sure you want to delete this video?"))try{const i=localStorage.getItem("token");(await fetch("/api/admin/videos/".concat(s),{method:"DELETE",headers:{Authorization:"Bearer ".concat(i)}})).ok?(t(e.filter(e=>e._id!==s)),v()):r("Failed to delete video")}catch(l){r("Error deleting video: "+l.message)}})(s._id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})})]},s._id)})})]})}),C>1&&(0,x.jsxs)("div",{className:"bg-white/5 px-4 py-3 flex items-center justify-between border-t border-white/10 text-white",children:[(0,x.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,x.jsx)("button",{onClick:()=>m(Math.max(1,h-1)),disabled:1===h,className:"relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/5 hover:bg-white/10 disabled:opacity-50",children:"Previous"}),(0,x.jsx)("button",{onClick:()=>m(Math.min(C,h+1)),disabled:h===C,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-white/20 text-sm font-medium rounded-md text-white bg-white/5 hover:bg-white/10 disabled:opacity-50",children:"Next"})]}),(0,x.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,x.jsx)("div",{children:(0,x.jsxs)("p",{className:"text-sm text-white/70",children:["Showing ",(0,x.jsx)("span",{className:"font-medium",children:k+1})," to"," ",(0,x.jsx)("span",{className:"font-medium",children:Math.min(y,N.length)})," of"," ",(0,x.jsx)("span",{className:"font-medium",children:N.length})," results"]})}),(0,x.jsx)("div",{children:(0,x.jsx)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:Array.from({length:C},(e,t)=>t+1).map(e=>(0,x.jsx)("button",{onClick:()=>m(e),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===h?"z-10 bg-blue-500/20 border-blue-500 text-blue-300":"bg-white/5 border-white/20 text-white/70 hover:bg-white/10"),children:e},e))})})]})]})]}),0===A.length&&!s&&(0,x.jsxs)("div",{className:"text-center py-12",children:[(0,x.jsx)("div",{className:"text-white/50 text-6xl mb-4",children:"\ud83c\udfa5"}),(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"No videos found"}),(0,x.jsx)("p",{className:"text-white/70",children:n||"all"!==c?"Try adjusting your search or filters":"No videos have been uploaded yet"})]})]})},j=()=>{const[e,t]=(0,i.useState)({monitoring:{cpuThreshold:{warning:80,critical:90},memoryThreshold:{warning:80,critical:90},diskThreshold:{warning:80,critical:90},responseTimeThreshold:{warning:1e3,critical:2e3},errorRateThreshold:{warning:5,critical:10},refreshInterval:30},backup:{enabled:!0,interval:24,maxBackups:7,compression:!0,directory:"/backups"},logging:{level:"info",maxFileSize:"10MB",maxFiles:5,enableConsole:!0,enableFile:!0},security:{sessionTimeout:24,maxLoginAttempts:5,lockoutDuration:15,requireTwoFactor:!1,passwordMinLength:8},notifications:{emailAlerts:!0,slackWebhook:"",discordWebhook:"",alertCooldown:300},performance:{enableCaching:!0,cacheTimeout:3600,enableCompression:!0,maxRequestSize:"10MB"}}),[s,a]=(0,i.useState)(!0),[l,r]=(0,i.useState)(!1),[n,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[h,m]=(0,i.useState)("monitoring"),[u,b]=(0,i.useState)(!1);(0,i.useEffect)(()=>{g()},[]);const g=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/admin/settings",{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(t=>(0,p.A)((0,p.A)({},t),e)),o(null)}else o("Failed to fetch settings")}catch(n){o("Error fetching settings: "+n.message)}finally{a(!1)}},w=async t=>{try{const s=localStorage.getItem("token");(await fetch("/api/admin/settings/test/".concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(e.notifications)})).ok?d("".concat(t," connection test successful")):o("".concat(t," connection test failed"))}catch(n){o("Error testing ".concat(t," connection: ")+n.message)}},f=(e,s,i)=>{t(t=>(0,p.A)((0,p.A)({},t),{},{[e]:(0,p.A)((0,p.A)({},t[e]),{},{[s]:i})})),b(!0)},j=(e,s,i,a)=>{t(t=>(0,p.A)((0,p.A)({},t),{},{[e]:(0,p.A)((0,p.A)({},t[e]),{},{[s]:(0,p.A)((0,p.A)({},t[e][s]),{},{[i]:a})})})),b(!0)};return s?(0,x.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,x.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:[(0,x.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-white",children:"System Settings"}),(0,x.jsx)("p",{className:"text-white/70",children:"Configure system thresholds, preferences, and integrations"})]}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to reset all settings to default values?"))try{const e=localStorage.getItem("token");(await fetch("/api/admin/settings/reset",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})).ok?(g(),d("Settings reset to defaults"),b(!1)):o("Failed to reset settings")}catch(n){o("Error resetting settings: "+n.message)}},className:"bg-white/10 text-white px-3 py-1.5 rounded-lg hover:bg-white/20 border border-white/20",children:"Reset to Defaults"}),(0,x.jsxs)("button",{onClick:async()=>{r(!0);try{const t=localStorage.getItem("token");(await fetch("/api/admin/settings",{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(d("Settings saved successfully"),b(!1),o(null),setTimeout(()=>d(null),3e3)):o("Failed to save settings")}catch(n){o("Error saving settings: "+n.message)}finally{r(!1)}},disabled:!u||l,className:"px-3 py-1.5 rounded-lg flex items-center space-x-2 ".concat(u&&!l?"bg-blue-600 text-white hover:bg-blue-700":"bg-white/10 text-white/50 cursor-not-allowed border border-white/10"),children:[l&&(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,x.jsx)("span",{children:l?"Saving...":"Save Changes"})]})]})]}),c&&(0,x.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-3 mb-4 text-green-300",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-green-400",children:"\u2705"}),(0,x.jsx)("p",{children:c})]})}),n&&(0,x.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-3 mb-4 text-red-300",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-red-400",children:"\u274c"}),(0,x.jsx)("p",{children:n})]})}),u&&(0,x.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-4 text-yellow-300",children:(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)("span",{className:"text-yellow-400",children:"\u26a0\ufe0f"}),(0,x.jsx)("p",{children:"You have unsaved changes. Don't forget to save!"})]})}),(0,x.jsxs)("div",{className:"rounded-lg shadow-sm border border-white/10 bg-white/5 overflow-hidden",children:[(0,x.jsx)("div",{className:"border-b border-white/10",children:(0,x.jsx)("nav",{className:"flex flex-wrap gap-3 px-4 py-1.5",children:[{id:"monitoring",name:"Monitoring",icon:"\ud83d\udcca"},{id:"backup",name:"Backup",icon:"\ud83d\udcbe"},{id:"logging",name:"Logging",icon:"\ud83d\udcdd"},{id:"security",name:"Security",icon:"\ud83d\udd12"},{id:"notifications",name:"Notifications",icon:"\ud83d\udd14"},{id:"performance",name:"Performance",icon:"\u26a1"}].map(e=>(0,x.jsxs)("button",{onClick:()=>m(e.id),className:"py-2 px-3 rounded-md font-medium text-sm flex items-center space-x-2 ".concat(h===e.id?"bg-blue-600 text-white":"text-white/80 hover:bg-white/10"),children:[(0,x.jsx)("span",{children:e.icon}),(0,x.jsx)("span",{children:e.name})]},e.id))})}),(0,x.jsxs)("div",{className:"p-4",children:["monitoring"===h&&(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsx)("h3",{className:"text-base font-semibold text-white",children:"Monitoring Thresholds"}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h4",{className:"font-medium text-white/90",children:"CPU Usage Thresholds"}),(0,x.jsxs)("div",{className:"space-y-2.5",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Warning (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.cpuThreshold.warning,onChange:e=>j("monitoring","cpuThreshold","warning",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Critical (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.cpuThreshold.critical,onChange:e=>j("monitoring","cpuThreshold","critical",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h4",{className:"font-medium text-white/90",children:"Memory Usage Thresholds"}),(0,x.jsxs)("div",{className:"space-y-2.5",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Warning (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.memoryThreshold.warning,onChange:e=>j("monitoring","memoryThreshold","warning",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Critical (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.memoryThreshold.critical,onChange:e=>j("monitoring","memoryThreshold","critical",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h4",{className:"font-medium text-white/90",children:"Disk Usage Thresholds"}),(0,x.jsxs)("div",{className:"space-y-2.5",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Warning (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.diskThreshold.warning,onChange:e=>j("monitoring","diskThreshold","warning",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Critical (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.diskThreshold.critical,onChange:e=>j("monitoring","diskThreshold","critical",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h4",{className:"font-medium text-white/90",children:"Performance Thresholds"}),(0,x.jsxs)("div",{className:"space-y-2.5",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Response Time Warning (ms)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.responseTimeThreshold.warning,onChange:e=>j("monitoring","responseTimeThreshold","warning",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Error Rate Warning (%)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.errorRateThreshold.warning,onChange:e=>j("monitoring","errorRateThreshold","warning",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Refresh Interval (seconds)"}),(0,x.jsx)("input",{type:"number",value:e.monitoring.refreshInterval,onChange:e=>f("monitoring","refreshInterval",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),"backup"===h&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Backup Configuration"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"backup-enabled",checked:e.backup.enabled,onChange:e=>f("backup","enabled",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"backup-enabled",className:"ml-2 block text-sm text-white/80",children:"Enable automatic backups"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Backup Interval (hours)"}),(0,x.jsx)("input",{type:"number",value:e.backup.interval,onChange:e=>f("backup","interval",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Maximum Backups to Keep"}),(0,x.jsx)("input",{type:"number",value:e.backup.maxBackups,onChange:e=>f("backup","maxBackups",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Backup Directory"}),(0,x.jsx)("input",{type:"text",value:e.backup.directory,onChange:e=>f("backup","directory",e.target.value),className:"w-full max-w-md px-2.5 py-1.5 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"backup-compression",checked:e.backup.compression,onChange:e=>f("backup","compression",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"backup-compression",className:"ml-2 block text-sm text-white/80",children:"Enable backup compression"})]})]})]}),"logging"===h&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Logging Configuration"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Log Level"}),(0,x.jsxs)("select",{value:e.logging.level,onChange:e=>f("logging","level",e.target.value),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,x.jsx)("option",{value:"error",children:"Error"}),(0,x.jsx)("option",{value:"warn",children:"Warning"}),(0,x.jsx)("option",{value:"info",children:"Info"}),(0,x.jsx)("option",{value:"debug",children:"Debug"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Maximum File Size"}),(0,x.jsx)("input",{type:"text",value:e.logging.maxFileSize,onChange:e=>f("logging","maxFileSize",e.target.value),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Maximum Files to Keep"}),(0,x.jsx)("input",{type:"number",value:e.logging.maxFiles,onChange:e=>f("logging","maxFiles",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"logging-console",checked:e.logging.enableConsole,onChange:e=>f("logging","enableConsole",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"logging-console",className:"ml-2 block text-sm text-white/80",children:"Enable console logging"})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"logging-file",checked:e.logging.enableFile,onChange:e=>f("logging","enableFile",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"logging-file",className:"ml-2 block text-sm text-white/80",children:"Enable file logging"})]})]})]})]}),"security"===h&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Security Configuration"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Session Timeout (hours)"}),(0,x.jsx)("input",{type:"number",value:e.security.sessionTimeout,onChange:e=>f("security","sessionTimeout",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Maximum Login Attempts"}),(0,x.jsx)("input",{type:"number",value:e.security.maxLoginAttempts,onChange:e=>f("security","maxLoginAttempts",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Lockout Duration (minutes)"}),(0,x.jsx)("input",{type:"number",value:e.security.lockoutDuration,onChange:e=>f("security","lockoutDuration",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Minimum Password Length"}),(0,x.jsx)("input",{type:"number",value:e.security.passwordMinLength,onChange:e=>f("security","passwordMinLength",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"security-2fa",checked:e.security.requireTwoFactor,onChange:e=>f("security","requireTwoFactor",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"security-2fa",className:"ml-2 block text-sm text-white/80",children:"Require two-factor authentication"})]})]})]}),"notifications"===h&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Notification Configuration"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"notifications-email",checked:e.notifications.emailAlerts,onChange:e=>f("notifications","emailAlerts",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"notifications-email",className:"ml-2 block text-sm text-white/80",children:"Enable email alerts"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Slack Webhook URL"}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("input",{type:"text",value:e.notifications.slackWebhook,onChange:e=>f("notifications","slackWebhook",e.target.value),placeholder:"https://hooks.slack.com/services/...",className:"flex-1 px-2.5 py-1.5 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,x.jsx)("button",{onClick:()=>w("slack"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Test"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Discord Webhook URL"}),(0,x.jsxs)("div",{className:"flex space-x-2",children:[(0,x.jsx)("input",{type:"text",value:e.notifications.discordWebhook,onChange:e=>f("notifications","discordWebhook",e.target.value),placeholder:"https://discord.com/api/webhooks/...",className:"flex-1 px-2.5 py-1.5 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,x.jsx)("button",{onClick:()=>w("discord"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"Test"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Alert Cooldown (seconds)"}),(0,x.jsx)("input",{type:"number",value:e.notifications.alertCooldown,onChange:e=>f("notifications","alertCooldown",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,x.jsx)("p",{className:"text-sm text-white/70 mt-1",children:"Minimum time between duplicate alerts"})]})]})]}),"performance"===h&&(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Performance Configuration"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"performance-caching",checked:e.performance.enableCaching,onChange:e=>f("performance","enableCaching",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"performance-caching",className:"ml-2 block text-sm text-white/80",children:"Enable caching"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Cache Timeout (seconds)"}),(0,x.jsx)("input",{type:"number",value:e.performance.cacheTimeout,onChange:e=>f("performance","cacheTimeout",Number(e.target.value)),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"performance-compression",checked:e.performance.enableCompression,onChange:e=>f("performance","enableCompression",e.target.checked),className:"h-4 w-4 text-blue-500 focus:ring-blue-500 border-white/20 bg-white/5 rounded"}),(0,x.jsx)("label",{htmlFor:"performance-compression",className:"ml-2 block text-sm text-white/80",children:"Enable response compression"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-xs font-medium text-white/80 mb-1",children:"Maximum Request Size"}),(0,x.jsx)("input",{type:"text",value:e.performance.maxRequestSize,onChange:e=>f("performance","maxRequestSize",e.target.value),className:"w-full max-w-[200px] px-2 py-1 border border-white/20 rounded-md bg-white/5 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]})]})},v=()=>{const[e,t]=(0,i.useState)({}),[s,a]=(0,i.useState)(!1),l=async(e,s)=>{try{a(!0);const i=localStorage.getItem("token"),l=await fetch("".concat("http://localhost:5002").concat(s),{headers:{Authorization:i?"Bearer ".concat(i):""}}),r=await l.json().catch(()=>({message:"Non-JSON response"}));t(t=>(0,p.A)((0,p.A)({},t),{},{[e]:{ok:l.ok,status:l.status,data:r}}))}catch(i){t(t=>(0,p.A)((0,p.A)({},t),{},{[e]:{ok:!1,status:0,data:{error:i.message}}}))}finally{a(!1)}},r=e=>{let{title:t,result:s}=e;return(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl border border-white/10 p-4 shadow-sm",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("h4",{className:"text-sm font-semibold text-white",children:t}),s?(0,x.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(s.ok?"bg-green-500/10 text-green-300":"bg-red-500/10 text-red-300"),children:s.ok?"OK":"FAIL"}):(0,x.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-white/10 text-white/70",children:"Not run"})]}),(0,x.jsx)("pre",{className:"text-xs text-white/80 bg-white/10 rounded p-2 overflow-auto max-h-48",children:s?JSON.stringify(s.data,null,2):"\u2014"}),s&&(0,x.jsxs)("div",{className:"mt-2 text-xs text-white/70",children:["HTTP ",s.status]})]})};return(0,x.jsxs)("div",{className:"px-0 py-4",children:[(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Admin Tests"}),(0,x.jsx)("p",{className:"text-white/70",children:"Run backend health diagnostics directly from the dashboard."})]}),(0,x.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,x.jsx)("button",{onClick:async()=>{await l("ffmpeg","/api/health/ffmpeg"),await l("memory","/api/health/memory"),await l("memoryDiagnostics","/api/health/memory/diagnostics"),await l("ready","/api/health/ready"),await l("detailed","/api/health/detailed")},disabled:s,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:s?"Running\u2026":"Run All"}),(0,x.jsx)("button",{onClick:()=>l("ffmpeg","/api/health/ffmpeg"),className:"px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900",children:"FFmpeg"}),(0,x.jsx)("button",{onClick:()=>l("memory","/api/health/memory"),className:"px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900",children:"Memory"}),(0,x.jsx)("button",{onClick:()=>l("memoryDiagnostics","/api/health/memory/diagnostics"),className:"px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900",children:"Memory Diagnostics"}),(0,x.jsx)("button",{onClick:()=>l("ready","/api/health/ready"),className:"px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900",children:"Readiness"}),(0,x.jsx)("button",{onClick:()=>l("detailed","/api/health/detailed"),className:"px-3 py-2 rounded-lg bg-gray-800 text-white hover:bg-gray-900",children:"Detailed Health"})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsx)(r,{title:"FFmpeg",result:e.ffmpeg}),(0,x.jsx)(r,{title:"Memory",result:e.memory}),(0,x.jsx)(r,{title:"Memory Diagnostics",result:e.memoryDiagnostics}),(0,x.jsx)(r,{title:"Readiness",result:e.ready}),(0,x.jsx)(r,{title:"Detailed Health",result:e.detailed})]})]})},N=()=>{const[e,t]=(0,i.useState)(!0),[s,a]=(0,i.useState)([]),[l,r]=(0,i.useState)("");return(0,i.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:5002","/api/admin/videos/ready-to-edit"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("HTTP ".concat(t.status));const s=await t.json();a((null===s||void 0===s?void 0:s.users)||[])}catch(e){r(e.message||"Failed to load")}finally{t(!1)}})()},[]),(0,x.jsx)("div",{className:"px-0 py-4",children:(0,x.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-5",children:[(0,x.jsx)("h2",{className:"text-base font-semibold text-white mb-3",children:"Videos Ready to Edit"}),e&&(0,x.jsx)("p",{className:"text-white/70",children:"Loading..."}),l&&(0,x.jsx)("p",{className:"text-red-300",children:l}),!e&&!l&&(0===s.length?(0,x.jsx)("p",{className:"text-white/70",children:"No users currently awaiting editing."}):(0,x.jsx)("ul",{className:"divide-y divide-white/10",children:s.map(e=>(0,x.jsxs)("li",{className:"py-3 flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"font-medium text-white",children:e.name||"Unnamed User"}),(0,x.jsx)("p",{className:"text-sm text-white/70",children:e.email})]}),(0,x.jsxs)("div",{className:"text-sm text-white/80",children:[e.videoCount," video(s)"]})]},e.userId))}))]})})};var y,k,A,C,S,T,E,B,F,M,z,P,D,I,U,L,R,O,V,_,q,W,J,H,K,G,Q,$,Y,Z,X,ee,te=s(7528),se=s(5464);const ie=se.Ay.div(y||(y=(0,te.A)(["\n  max-width: 1000px;\n  margin: 0 auto;\n"]))),ae=se.Ay.div(k||(k=(0,te.A)(["\n  margin-bottom: 2rem;\n"]))),le=se.Ay.h1(A||(A=(0,te.A)(["\n  color: #fff;\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n"]))),re=se.Ay.p(C||(C=(0,te.A)(["\n  color: rgba(255,255,255,0.7);\n  font-size: 1rem;\n"]))),ne=se.Ay.div(S||(S=(0,te.A)(["\n  background: rgba(255,255,255,0.05);\n  border-radius: 12px;\n  padding: 1.5rem;\n  margin-bottom: 1.5rem;\n  border: 1px solid rgba(255,255,255,0.1);\n"]))),oe=se.Ay.h2(T||(T=(0,te.A)(["\n  color: #fff;\n  font-size: 1.3rem;\n  margin-bottom: 1rem;\n  font-weight: 600;\n"]))),ce=se.Ay.div(E||(E=(0,te.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n"]))),de=se.Ay.div(B||(B=(0,te.A)(["\n  background: rgba(255,255,255,0.05);\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n"]))),xe=se.Ay.div(F||(F=(0,te.A)(["\n  color: rgba(255,255,255,0.7);\n  font-size: 0.9rem;\n  margin-bottom: 0.5rem;\n"]))),he=se.Ay.div(M||(M=(0,te.A)(["\n  color: #fff;\n  font-weight: 600;\n  font-size: 1.1rem;\n  \n  &.god-plan {\n    background: linear-gradient(45deg, #FFD700, #FFA500);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    font-weight: 700;\n  }\n"]))),me=se.Ay.div(z||(z=(0,te.A)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n"]))),ue=se.Ay.div(P||(P=(0,te.A)(["\n  background: rgba(255,255,255,0.05);\n  padding: 1.5rem;\n  border-radius: 12px;\n  text-align: center;\n  border: 1px solid rgba(255,255,255,0.1);\n  transition: transform 0.2s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  }\n"]))),pe=se.Ay.div(D||(D=(0,te.A)(["\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n"]))),be=se.Ay.div(I||(I=(0,te.A)(["\n  color: #fff;\n  font-size: 1.8rem;\n  font-weight: 700;\n  margin-bottom: 0.5rem;\n"]))),ge=se.Ay.div(U||(U=(0,te.A)(["\n  color: rgba(255,255,255,0.7);\n  font-size: 0.9rem;\n"]))),we=se.Ay.div.withConfig({shouldForwardProp:e=>"connected"!==e})(L||(L=(0,te.A)(["\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  background: rgba(255,255,255,0.05);\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n"]))),fe=se.Ay.div(R||(R=(0,te.A)(["\n  font-size: 1.5rem;\n"]))),je=se.Ay.div(O||(O=(0,te.A)(["\n  color: #fff;\n  font-weight: 600;\n  font-size: 1.1rem;\n"]))),ve=se.Ay.div(V||(V=(0,te.A)(["\n  color: rgba(255,255,255,0.8);\n  font-size: 0.9rem;\n  font-family: monospace;\n  background: rgba(255,255,255,0.1);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n"]))),Ne=se.Ay.div(_||(_=(0,te.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n"]))),ye=se.Ay.div(q||(q=(0,te.A)(["\n  background: rgba(255,255,255,0.05);\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),ke=se.Ay.div(W||(W=(0,te.A)(["\n  flex: 1;\n"]))),Ae=se.Ay.div(J||(J=(0,te.A)(["\n  color: #fff;\n  font-weight: 500;\n  margin-bottom: 0.25rem;\n"]))),Ce=se.Ay.div(H||(H=(0,te.A)(["\n  color: rgba(255,255,255,0.7);\n  font-size: 0.9rem;\n"]))),Se=se.Ay.div(K||(K=(0,te.A)(["\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n"]))),Te=se.Ay.span(G||(G=(0,te.A)(["\n  padding: 0.25rem 0.75rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 500;\n  text-transform: capitalize;\n  \n  ","\n"])),e=>{switch(e.status){case"completed":return"background: rgba(16,185,129,0.15); color: #86efac;";case"processing":return"background: rgba(245,158,11,0.15); color: #fde68a;";case"failed":return"background: rgba(239,68,68,0.15); color: #fca5a5;";default:return"background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8);"}}),Ee=se.Ay.div(Q||(Q=(0,te.A)(["\n  display: flex;\n  gap: 0.25rem;\n"]))),Be=se.Ay.span($||($=(0,te.A)(["\n  font-size: 1.2rem;\n  cursor: help;\n"]))),Fe=se.Ay.div(Y||(Y=(0,te.A)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 3rem;\n  color: rgba(255,255,255,0.7);\n  font-size: 1.1rem;\n"]))),Me=se.Ay.div(Z||(Z=(0,te.A)(["\n  text-align: center;\n  padding: 2rem;\n  background: rgba(239,68,68,0.1);\n  border-radius: 12px;\n  border: 1px solid rgba(239,68,68,0.3);\n  \n  h3 {\n    color: #fca5a5;\n    margin-bottom: 0.5rem;\n  }\n  \n  p {\n    color: #f87171;\n    margin-bottom: 1rem;\n  }\n"]))),ze=se.Ay.button(X||(X=(0,te.A)(["\n  background: #EF4444;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 25px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background 0.3s ease;\n\n  &:hover {\n    background: #DC2626;\n  }\n"]))),Pe=se.Ay.button(ee||(ee=(0,te.A)(["\n  background: #4F46E5;\n  color: white;\n  border: none;\n  padding: 0.75rem 1.5rem;\n  border-radius: 25px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: background 0.3s ease;\n  width: 100%;\n  margin-top: 1rem;\n\n  &:hover {\n    background: #4338CA;\n  }\n"]))),De=()=>{var e,t,s,a,l,r,n,o,c,d,h,m,u,p,b,g,w;const[f,j]=(0,i.useState)(null),[v,N]=(0,i.useState)(!0),[y,k]=(0,i.useState)("");(0,i.useEffect)(()=>{A()},[]);const A=async()=>{try{N(!0);const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:5002","/api/admin/dashboard-stats"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch dashboard statistics");const s=await t.json();j(s)}catch(y){console.error("Error fetching dashboard stats:",y),k(y.message)}finally{N(!1)}};return v?(0,x.jsx)(ie,{children:(0,x.jsx)(Fe,{children:(0,x.jsx)("div",{children:"Loading your Google Drive statistics..."})})}):y?(0,x.jsx)(ie,{children:(0,x.jsxs)(Me,{children:[(0,x.jsx)("h3",{children:"\u26a0\ufe0f Error Loading Statistics"}),(0,x.jsx)("p",{children:y}),(0,x.jsx)(ze,{onClick:A,children:"\ud83d\udd04 Retry"})]})}):(0,x.jsxs)(ie,{children:[(0,x.jsxs)(ae,{children:[(0,x.jsx)(le,{children:"\u2601\ufe0f Google Drive Dashboard"}),(0,x.jsx)(re,{children:"Monitor your video backups and storage usage"})]}),(0,x.jsxs)(ne,{children:[(0,x.jsx)(oe,{children:"\ud83d\udc64 Account Information"}),(0,x.jsxs)(ce,{children:[(0,x.jsxs)(de,{children:[(0,x.jsx)(xe,{children:"Email"}),(0,x.jsx)(he,{children:null===f||void 0===f||null===(e=f.user)||void 0===e?void 0:e.email})]}),(0,x.jsxs)(de,{children:[(0,x.jsx)(xe,{children:"Plan"}),(0,x.jsxs)(he,{className:"god"===(null===f||void 0===f||null===(t=f.user)||void 0===t?void 0:t.plan)?"god-plan":"",children:[null===f||void 0===f||null===(s=f.user)||void 0===s||null===(a=s.plan)||void 0===a?void 0:a.toUpperCase(),"god"===(null===f||void 0===f||null===(l=f.user)||void 0===l?void 0:l.plan)&&" \u26a1"]})]}),(0,x.jsxs)(de,{children:[(0,x.jsx)(xe,{children:"Videos Processed"}),(0,x.jsxs)(he,{children:[null===f||void 0===f||null===(r=f.user)||void 0===r?void 0:r.videosProcessed,"/",null===f||void 0===f||null===(n=f.user)||void 0===n?void 0:n.monthlyLimit,"god"===(null===f||void 0===f||null===(o=f.user)||void 0===o?void 0:o.plan)&&" (Unlimited)"]})]})]})]}),(0,x.jsxs)(ne,{children:[(0,x.jsx)(oe,{children:"\ud83c\udfac Video Statistics"}),(0,x.jsxs)(me,{children:[(0,x.jsxs)(ue,{children:[(0,x.jsx)(pe,{children:"\ud83d\udcf9"}),(0,x.jsx)(be,{children:(null===f||void 0===f||null===(c=f.videos)||void 0===c?void 0:c.total)||0}),(0,x.jsx)(ge,{children:"Total Videos"})]}),(0,x.jsxs)(ue,{children:[(0,x.jsx)(pe,{children:"\ud83d\udce4"}),(0,x.jsx)(be,{children:(null===f||void 0===f||null===(d=f.videos)||void 0===d?void 0:d.rawBackups)||0}),(0,x.jsx)(ge,{children:"Raw Videos Backed Up"})]}),(0,x.jsxs)(ue,{children:[(0,x.jsx)(pe,{children:"\u2728"}),(0,x.jsx)(be,{children:(null===f||void 0===f||null===(h=f.videos)||void 0===h?void 0:h.processedBackups)||0}),(0,x.jsx)(ge,{children:"Processed Videos Backed Up"})]}),(0,x.jsxs)(ue,{children:[(0,x.jsx)(pe,{children:"\ud83d\udcbe"}),(0,x.jsx)(be,{children:(e=>{if(!e||0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB"][t]})(null===f||void 0===f||null===(m=f.videos)||void 0===m?void 0:m.storageUsed)}),(0,x.jsx)(ge,{children:"Storage Used"})]})]})]}),(0,x.jsxs)(ne,{children:[(0,x.jsx)(oe,{children:"\ud83d\udd17 Google Drive Connection"}),(0,x.jsxs)(we,{connected:null===f||void 0===f||null===(u=f.googleDrive)||void 0===u?void 0:u.connected,children:[(0,x.jsx)(fe,{children:null!==f&&void 0!==f&&null!==(p=f.googleDrive)&&void 0!==p&&p.connected?"\u2705":"\u274c"}),(0,x.jsx)(je,{children:null!==f&&void 0!==f&&null!==(b=f.googleDrive)&&void 0!==b&&b.connected?"Connected":"Not Connected"}),(null===f||void 0===f||null===(g=f.googleDrive)||void 0===g?void 0:g.folderId)&&(0,x.jsxs)(ve,{children:["Folder ID: ",f.googleDrive.folderId]})]})]}),(null===f||void 0===f||null===(w=f.videos)||void 0===w?void 0:w.recent)&&f.videos.recent.length>0&&(0,x.jsxs)(ne,{children:[(0,x.jsx)(oe,{children:"\ud83d\udd52 Recent Videos"}),(0,x.jsx)(Ne,{children:f.videos.recent.map((e,t)=>{return(0,x.jsxs)(ye,{children:[(0,x.jsxs)(ke,{children:[(0,x.jsx)(Ae,{children:e.originalFileName}),(0,x.jsx)(Ce,{children:(s=e.createdAt,new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,x.jsxs)(Se,{children:[(0,x.jsx)(Te,{status:e.status,children:e.status}),(0,x.jsxs)(Ee,{children:[e.googleDriveRawFileId&&(0,x.jsx)(Be,{title:"Raw backup available",children:"\ud83d\udce4"}),e.googleDriveProcessedFileId&&(0,x.jsx)(Be,{title:"Processed backup available",children:"\u2728"})]})]})]},e._id||t);var s})})]}),(0,x.jsx)(Pe,{onClick:A,children:"\ud83d\udd04 Refresh Statistics"})]})};s(2656);const Ie=e=>{let{systemHealth:t}=e;const s=(0,l.Zp)();return(0,x.jsxs)("div",{className:"px-0",children:[(0,x.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-lg p-4 mb-3 text-white",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Admin Dashboard"}),(0,x.jsx)("p",{className:"text-blue-100",children:"Manage your entire video platform from one place"})]}),(0,x.jsx)("div",{className:"text-4xl",children:"\ud83d\udee0\ufe0f"})]})}),(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mb-3",children:[(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 p-3 text-center hover:shadow-md transition-shadow",children:[(0,x.jsx)("div",{className:"text-3xl mb-2",children:"\ud83e\ude7a"}),(0,x.jsx)("p",{className:"text-xs font-medium text-white/80 mb-1",children:"System Health"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===t||void 0===t?void 0:t.status)||"Unknown"}),(0,x.jsx)("p",{className:"text-xs text-green-300 mt-1",children:"All systems operational"})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 p-3 text-center hover:shadow-md transition-shadow",children:[(0,x.jsx)("div",{className:"text-3xl mb-2",children:"\ud83d\udc65"}),(0,x.jsx)("p",{className:"text-xs font-medium text-white/80 mb-1",children:"Total Users"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-green-300",children:(null===t||void 0===t?void 0:t.users)||0}),(0,x.jsx)("p",{className:"text-xs text-green-300 mt-1",children:"Active accounts"})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 p-3 text-center hover:shadow-md transition-shadow",children:[(0,x.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udfa5"}),(0,x.jsx)("p",{className:"text-xs font-medium text-white/80 mb-1",children:"Total Videos"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:(null===t||void 0===t?void 0:t.videos)||0}),(0,x.jsx)("p",{className:"text-xs text-blue-400 mt-1",children:"Videos processed"})]})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 p-3 mb-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),(0,x.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{id:"users",title:"User Management",description:"Manage users, roles, and credits",icon:"\ud83d\udc65",color:"text-blue-300",buttonColor:"bg-blue-600 hover:bg-blue-700"},{id:"videos",title:"Video Management",description:"View and manage all videos",icon:"\ud83c\udfa5",color:"text-green-300",buttonColor:"bg-green-600 hover:bg-green-700"},{id:"ready-to-edit",title:"Videos Ready to Edit",description:"Videos awaiting processing",icon:"\u2702\ufe0f",color:"text-purple-300",buttonColor:"bg-purple-600 hover:bg-purple-700"},{id:"monitoring",title:"System Monitoring",description:"Real-time system metrics",icon:"\ud83d\udcca",color:"text-orange-300",buttonColor:"bg-orange-600 hover:bg-orange-700"},{id:"backups",title:"Backup Manager",description:"Create and manage backups",icon:"\ud83d\udcbe",color:"text-red-300",buttonColor:"bg-red-600 hover:bg-red-700"},{id:"drive",title:"Google Drive",description:"Drive storage and backups",icon:"\u2601\ufe0f",color:"text-yellow-300",buttonColor:"bg-yellow-600 hover:bg-yellow-700"}].map(e=>(0,x.jsxs)("div",{className:"border border-white/10 rounded-lg p-3 bg-white/5 ".concat(e.color),children:[(0,x.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,x.jsx)("div",{className:"text-2xl",children:e.icon}),(0,x.jsx)("button",{onClick:()=>s("/admin?tab=".concat(e.id)),className:"px-3 py-1 rounded-full text-xs font-medium text-white ".concat(e.buttonColor," transition-colors"),children:"Open"})]}),(0,x.jsx)("h4",{className:"font-semibold text-white mb-1",children:e.title}),(0,x.jsx)("p",{className:"text-sm text-white/80",children:e.description})]},e.id))})]}),(0,x.jsxs)("div",{className:"bg-white/5 rounded-xl shadow-sm border border-white/10 p-3",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("span",{className:"text-xl",children:"\ud83d\udce5"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-white",children:"User Registrations"}),(0,x.jsx)("p",{className:"text-xs text-white/70",children:"Last 24 hours"})]})]}),(0,x.jsx)("span",{className:"text-sm font-semibold text-white",children:(null===t||void 0===t?void 0:t.recentUsers)||0})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("span",{className:"text-xl",children:"\u2b06\ufe0f"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-white",children:"Video Uploads"}),(0,x.jsx)("p",{className:"text-xs text-white/70",children:"Last 24 hours"})]})]}),(0,x.jsx)("span",{className:"text-sm font-semibold text-white",children:(null===t||void 0===t?void 0:t.recentVideos)||0})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/10 rounded-lg",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsx)("span",{className:"text-xl",children:"\u26a1"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-white",children:"System Performance"}),(0,x.jsx)("p",{className:"text-xs text-white/70",children:"Current status"})]})]}),(0,x.jsx)("span",{className:"text-sm font-semibold text-green-300",children:"Excellent"})]})]})]})]})},Ue=()=>{const{user:e,loading:t}=(0,a.A)(),[s,n]=(0,i.useState)("overview"),[p,b]=(0,i.useState)(null),[g,y]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!1),[C,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e&&"admin"===e.role&&E()},[e]);const T=(0,l.zy)();(0,i.useEffect)(()=>{const e=new URLSearchParams(T.search).get("tab")||T.state&&T.state.tab;e&&["overview","monitoring","backups","logs","users","videos","ready-to-edit","drive","server-settings","settings","tests"].includes(e)&&n(e)},[T.search,T.state]);const E=async()=>{try{const e=localStorage.getItem("token"),t="undefined"!==typeof window?window.location.origin:"",s="http://localhost:5002".replace(/\/$/,"")||(t.includes("localhost:3000")?t.replace(":3000",":5002"):t),i=await fetch("".concat(s,"/api/monitoring/health"),{headers:{Authorization:"Bearer ".concat(e),"x-bypass-cache":"1"}});if(i.ok){const e=await i.json();b(e)}}catch(e){console.error("Error fetching system health:",e)}};if(t)return(0,x.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading Admin Dashboard..."})]})});if(!e||"admin"!==e.role)return(0,x.jsx)(l.C5,{to:"/login",replace:!0});r.A,o.A,c.A,c.A,d.A;return(0,x.jsx)("div",{className:"min-h-screen bg-slate-900",children:(0,x.jsx)("div",{className:"relative pl-8 pr-8 pb-5",style:{paddingTop:"var(--dashboard-header-bottom, 0px)"},children:(0,x.jsx)("div",{className:"relative z-10",children:(()=>{switch(s){case"overview":default:return(0,x.jsx)(Ie,{systemHealth:p});case"monitoring":return(0,x.jsx)(h,{});case"backups":return(0,x.jsx)(m,{});case"logs":return(0,x.jsx)(u,{});case"users":return(0,x.jsx)(w,{});case"videos":return(0,x.jsx)(f,{});case"ready-to-edit":return(0,x.jsx)(N,{});case"drive":return(0,x.jsx)(De,{});case"server-settings":case"settings":return(0,x.jsx)(j,{});case"tests":return(0,x.jsx)(v,{})}})()})})})}},7118:(e,t,s)=>{s.d(t,{A:()=>i});const i=(0,s(1639).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}}]);
//# sourceMappingURL=787.3789db27.chunk.js.map